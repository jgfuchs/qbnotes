{% extends "layout.html" %}

{% set page_title=group.name %}

{% block body %}
	<ol class="breadcrumb">
		<li><a href="{{ url_for('all_groups') }}">Home</a></li>
		<li class="active">{{ group.name }}</li>
	</ol>

	<input type="text" id="table-search" class="form-control" placeholder="Search..." style="width: 60%" accesskey="f" /><br />
		
	<table class="table table-striped table-condensed">
		<thead>
			<tr>
				<th class="col-md-8">Title</th>
				<th class="col-md-4">Creator</th>
			</tr>
		</thead>
	
		<tbody>
			{% for entry in group.entries.order_by("entry.creator", "entry.title").all() %}
				<tr>
					<th><a href="{{ url_for('entry_detail', entry_id=entry.id) }}" data-ajax="false" >{{ entry.title }}</a></th>
					<td>{{ entry.creator }}</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
	
	<a class="btn btn-default" accesskey="n" href="{{ url_for('new_entry', group_id=group.id) }}">
		<span class="glyphicon glyphicon-plus"></span> New entry
	</a>
{% endblock %}

{% block script %}
	<script>
		$.expr[":"].contains = $.expr.createPseudo(function(arg) {
			return function (elem) {
				return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
			};
		});
			
		$("#table-search").keyup(function () {
			var q = this.value;
			
			var rows = $("tbody").find("tr");
			if (q == "") {
				rows.show();
				return;
			}
			
			rows.hide();
			
			rows.filter(function (i, e) {
				return $(this).is(":contains('" + q + "')");
			}).show();
		});
	</script>
{% endblock %}
